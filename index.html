<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Software tools for geospatial analysis</title>

<script src="site_libs/header-attrs-2.2/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Choropleth/mmc_surrounds.html">Choropleth</a>
</li>
<li>
  <a href="RehabCatchment/README.html">Catchment zones</a>
</li>
<li>
  <a href="RehabCatchmentAdvanced/Googleway_Mapdeck.html">Catchment zones (Advanced)</a>
</li>
<li>
  <a href="Python.html">Python Examples</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Software tools for geospatial analysis</h1>

</div>


<p><span style="color:red">The data and code required for these examples can be dowloaded <a href="https://github.com/richardbeare/GeospatialStroke/archive/master.zip">here</a>.</span></p>
<p>This site contains live versions of the examples discussed in the paper <a href="https://www.frontiersin.org/articles/10.3389/fneur.2019.00743/">An introduction to software tools, data and services for geospatial analysis of stroke services</a></p>
<p>The live examples can be accessed via the navigation bar above. There are several implementations of two examples:</p>
<ol style="list-style-type: decimal">
<li><p>A choropleth, or thematic map, displaying per-postcode estimates of stroke cases.</p></li>
<li><p>An example of estimating catchment zones for rehabilitation centers, and the resulting load on centers, based on distances through the road network.</p></li>
</ol>
<p>The examples are illustrated using both <em>R</em> and <em>Python</em>.</p>
<p>A more advanced version of the second example, that uses web services requiring API keys, is also provided. Interested readers must create the relevant accounts and install the necessary keys in order to explore this example fully.</p>
<div id="getting-started-with-r-and-python" class="section level2">
<h2>Getting started with <em>R</em> and <em>Python</em></h2>
<p>For convenience, the supplementary material from the paper, providing some general instructions for getting started, is available <a href="supplementary.html">here</a></p>
<p>The <a href="https://software-carpentry.org/">Software Carpentries</a> are an excellent source of training material for readers getting started with <em>R</em> and <em>Python</em>.</p>
</div>
<div id="running-the-r-examples-locally" class="section level2">
<h2>Running the <em>R</em> examples locally</h2>
<p>Running the examples requires internet access for installing packages, geocoding and other web services.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Fetch the source code and data </strong> using the link at the top of this page.</p>
<p>Recreating the examples requires a local installation of <em>R</em> and/or <em>Python</em> and copies of the source code.</p></li>
<li><p>The <em>Choropleth</em> example for <em>R</em> is in <code>Choropleth/mmc_surrounds.Rmd</code> and <code>Choropleth/mmc_surrounds.R</code>.</p>
<p>Open <code>Choropleth/mmc_surrounds.Rmd</code> from within <em>Rstudio</em>, select <code>Session-&gt;Set Working Directory-&gt;To Source File Location</code></p>
<p>Press the <code>Knit</code> icon.</p></li>
<li><p>The <em>Catchment Zones</em> example of <em>R</em> is in <code>RehabCatchment/README.Rmd</code>.</p>
<p>Open <code>RehabCatchment/README.Rmd</code> from within <em>Rstudio</em>, select <code>Session-&gt;Set Working Directory-&gt;To Source File Location</code></p>
<p>Press the <code>Knit</code> icon.</p>
<p>This example takes considerable time to run. Some results are saved after the first run so that subsequent runs are faster.</p>
<p>It is useful to click the “open in browser” button to view the resulting document so that the forward and back buttons can be used to navigate the interactive maps.</p></li>
<li><p><strong>Problems</strong></p>
<p>The two most likely common problems are an incorrectly set working directory for <em>R</em> and incompatible package versions.<br />
The working directory can be determined by examining the line at the top of the <code>Console</code> window in <em>Rstudio</em>.</p>
<p>When working with one of the examples the working directory should be set, using <code>Session-&gt;Set Working Directory</code>,<br />
to the example folder, such as <code>Choropleth</code>.</p>
<p>Package version incompatibilities may be problem if you are already using <em>R</em> and have some of the required packages<br />
installed. The early parts of the examples attempt to install missing packages, and the dependencies,<br />
but won’t upgrade packages that are already installed. If you experience problems, attempt to explicitly install packages as follows:</p>
<pre class="r"><code>install.packages(c(&quot;tidyverse&quot;, &quot;sf&quot;, &quot;here&quot;, &quot;units&quot;, &quot;tmaptools&quot;, 
                   &quot;tmap&quot;, &quot;knitr&quot;, &quot;mapdeck&quot;, &quot;googleway&quot;,
                   &quot;mapview&quot;, &quot;devtools&quot;, &quot;dodgr&quot;, &quot;viridisLite&quot;))

devtools::install_github(&quot;HughParsonage/PSMA&quot;)</code></pre>
<p>If problems persist, attempt to update the packages using</p>
<pre class="r"><code>update.packages(ask = FALSE)</code></pre></li>
<li><p>Please use the github <a href="https://github.com/richardbeare/GeospatialStroke/issues">issue tracker</a> to ask questions or point out problems.</p></li>
<li><p>The code does depend on column names and content of data tables provided in the zip file. These structures may differ if you download the data yourself or adapt the code to alternative data sets. Modifying the examples is definitely possible with experience and practice.</p></li>
</ol>
</div>
<div id="running-the-python-examples-locally" class="section level2">
<h2>Running the <em>Python</em> examples locally</h2>
<ol style="list-style-type: decimal">
<li><strong>Fetch the source code and data</strong> using the link at the top of the page.</li>
<li>Follow the <em>Python</em> setup instructions <a href="supplementary.html">here</a>.</li>
</ol>
<p>The <em>Choropleth</em> example for <em>Python</em> is in <code>python/notebooks/example1.pynb</code>.</p>
<p>The <em>Catchment Zones</em> example of <em>Python</em> is in <code>python/notebooks/example1.pynb</code>.</p>
</div>

<head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MN65F5GXZ8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MN65F5GXZ8');
</script>

</head>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
